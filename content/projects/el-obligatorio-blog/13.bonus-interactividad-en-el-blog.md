---
title: Bonus - Interactividad en nuestro Blog
project: El Obligatorio Blog
summary: Crearemos un poco de magia en nuestra aplicación para hacerla más interactiva.
hidden: false
---

## Introducción

En este capitulo haremos nuestro blog un poco moderno con el uso de los magníficos Livewire y AlpineJS. Nos enfocaremos en hacer la lista de nuestras ultimas entradas al blog un poco interactivas para que el usuario pueda navegar fácilmente nuestro contenido.

## Recomendaciones

Antes de empezar el capitulo lo mas importante es repasar la documentación de Livewire y AlpineJS, de esta manera sera mucho mas fácil seguir con los pasos de este proyecto. Este tipo de paquetes se merecen un proyecto cada uno para poder aprender como usarlos, pero en este proyecto solo explicaremos lo mínimo debido a que si no serian otros 13 capítulos.

## ¿Que es lo que necesitamos?

En el capitulo anterior creamos lo necesario para poder paginar nuestras entradas al blog, pero no implementamos un sistema en nuestra aplicación para utilizarlo. Livewire se encargará de hacer nuestra paginación un poco interactiva el cual incluirá un buscador y se encargara de controlar la navegación de nuestras entradas.

Necesitamos un componente que se encargue de presentar las entradas al blog de las mas recientes a las mas antiguas. En este blog mostraremos 10 entradas por pagina y en el pie de la lista de entradas este componente tendrá una simple navegación "Anterior" y "Siguiente" para poder navegar en las diferentes paginas disponibles.

## Prueba

Empezaremos con nuestra primera prueba, Livewire trae consigo [herramientas practicas para hacer pruebas](https://laravel-livewire.com/docs/2.x/testing) a nuestro código. Creamos el archivo de prueba con el siguiente comando en bash:

``` bash
php artisan pest:test LivewirePostListTest
```

Abrimos el archivo `./tests/Feature/LivewirePostListTest.php` y borramos todo lo que trae por defecto. Agregamos lo siguiente:

``` php
<?php

use Illuminate\Support\Facades\Storage;
use Tests\Factories\PostFactory;

beforeEach(function () {
    Storage::fake('posts');
});
it('shows post per page', function () {
    PostFactory::new()->createMultiple(30);

    Livewire::test('post-list')
        ->assertSee('Mi título 30')
        ->assertDontSee('Mi título 20')
        ->call('nextPage')
        ->assertSee('Mi título 20')
        ->assertSee('Mi título 11')
        ->assertDontSee('Mi título 30')
        ->call('previousPage')
        ->assertDontSee('Mi título 20')
        ->assertSee('Mi título 30');
});
```

**Dado que** creamos 30 entradas al blog, **entonces** el componente `post-list` deberá mostrar la entrada con el tema `Mi título 30` y no la entrada con el titulo `Mi título 20`. Usamos un método llamado `nextPage` que se encargara de cargar la siguiente pagina y deberíamos ver la entrada `Mi título 20` hasta `Mi título 11` sin ver `Mi título 30`. Por ultimo, usamos el método `previousPage` para ir a la pagina anterior y asegurarnos que no carga la entrada con el titulo `Mi título 20` y si muestra la correct que seria `Mi título 30`.

Para entender un poco mas esta prueba, si nosotros creamos 30 entradas entonces esa colección sera compuesta por lo siguiente:

Pagina | Desde | Hasta
:----: | :---: | :---:
   1   |  30   |  21
   2   |  20   |  11
   3   |  10   |   1

