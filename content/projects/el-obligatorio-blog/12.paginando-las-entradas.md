---
title: Paginando nuestras entradas
project: El Obligatorio Blog
summary: Paginar el contenido nos optimizará nuestra aplicación a la hora de presentar las entradas que tenemos disponibles.
hidden: false
---

## Introducción

No tenemos un blog completo sin un sistema de paginación que nos ayudará a segmentar nuestras entradas. Esta funcionalidad nos ayudará también para el siguiente capitulo que hará nuestro blog un poco mas interactivo.

## Vista general

Laravel tiene consigo un sistema de paginación con [`Eloquent`](https://laravel.com/docs/9.x/eloquent#introduction) que simplemente se usa de la siguiente manera: [`Model::paginate()`](https://laravel.com/docs/9.x/eloquent-resources#pagination).

En nuestra aplicación no estamos usando Eloquent, entonces, eso significa que tendremos que desarrollar nuestro propio método `paginate()`.

## Prueba `createMultiple()`

Para paginar nuestras entradas debemos de tener una funcionalidad en nuestra fabrica para poder crear multiples entradas, por ejemplo, crear 20 entradas en una sola prueba y asi poder hacer pruebas contra varias entradas. Si usamos nuestra fabrica actualmente tendremos que usar `PostFactory::new()->create()` 20 veces, entonces, con eso en mente sabemos que tendremos que crear un método en nuestra fabrica que llamaremos `createMultiple(int $times)` que aceptará un `integer` para crear la cantidad de entradas que deseemos.

Abriremos `./tests/Unit/PostFactoryTest.php` y agregaremos la siguiente prueba:

``` php
it('creates multiple post files', function () {
    $posts = PostFactory::new()
        ->createMultiple(3);

    $this->assertFileExists($posts[0]);
    $this->assertFileExists($posts[1]);
    $this->assertFileExists($posts[2]);
});
```

**Dado que** creamos tres entradas al blog, **entonces** deberían existir tres archivos.

> Es muy importante hacer notar que `createMultiple()` regresará con un `Collection` y cada elemento contendrá la ruta de donde esta ubicado el archivo.

Por supuesto que si corremos `Pest` no encontrará `createMultiple()`, lo haremos ahora, abrimos `./tests/Factories/PostFactory.php` y agregamos lo siguiente:

``` php
public function createMultiple(int $times): Collection
{
    $date = $this->date ?? Carbon::today();

    return collect()->times($times, function ($currentCount, $key) use ($date, $times) {
        $postTitleNumber = $times - ($currentCount - 1);

        return $this->createPostFile($this->title.' '.$postTitleNumber, $date->subDays($key));
    });
}
```

Esta función utiliza la fecha de hoy para poder agregarla a los nombres de los archivos que vamos a crear. Luego crea una nueva colección utilizando [`collect()`](https://laravel.com/docs/9.x/collections#method-collect) y utiliza el método [`times()`](https://laravel.com/docs/9.x/collections#method-times) para reiterar cuantas veces necesitemos y crear una entrada con `createPostFile()`.

Si corremos `Pest` todo `PASA` y tenemos la funcionalidad de crear multiples entradas a nuestra necesidad.

## Prueba de paginación

Ahora si nos podemos enfocar en crear la paginación en nuestra aplicación. Abriremos `./tests/Unit/PostTest.php` y agregaremos la prueba:

``` php
```